@using FlowManager.Client.ViewModels
@using FlowManager.Client.Services;
@using FlowManager.Client.DTOs;
@using FlowManager.Shared.DTOs.Responses.User;
@using FlowManager.Shared.DTOs.Requests.User;
@using FlowManager.Shared.DTOs.Responses.Role;

@if (ShowAddForm)
{
    <div class="popup-backdrop" @onclick="CancelForm">
        <div class="popup-container">
            <h3>Create a new user</h3>

            <form @onsubmit="RegisterUser" @onsubmit:preventDefault="true">
                <div class="form-field">
                    <label for="name">Name:</label>
                    <input @bind="_name"
                           type="text"
                           id="name"
                           name="name"
                           class="popup-input"
                           required />
                </div>

                <div class="form-field">
                    <label for="email">Email:</label>
                    <input @bind="_email"
                           type="email"
                           id="email"
                           name="email"
                           class="popup-input"
                           required />
                </div>

                <div class="form-field">
                    <label>Roles:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox"
                                   class="role-checkbox"
                                   id="adminRole"
                                   name="adminRole"
                                   @bind="_isNewUserAdmin" />
                            <label for="adminRole">Admin</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox"
                                   id="moderatorRole"
                                   name="moderatorRole"
                                   @bind="_isNewUserModerator" />
                            <label for="moderatorRole">Moderator</label>
                        </div>
                    </div>
                </div>

                <div class="info-text">
                    *All the users are automatically set to employees.
                </div>

                <div class="modal-actions">
                    <button type="submit" class="submit-btn">Send</button>
                    <button type="button" @onclick="CancelForm" class="cancel-btn">Cancel</button>
                </div>
            </form>
        </div>
    </div>
}
